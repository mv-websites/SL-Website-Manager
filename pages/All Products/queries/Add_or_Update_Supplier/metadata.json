{
  "gitSyncId": "68c1972c92810156b121ec4e_16905f7d-17d5-4ed0-bf36-5c684cd7cdd8",
  "id": "All Products_Add_or_Update_Supplier",
  "pluginId": "mysql-plugin",
  "pluginType": "DB",
  "unpublishedAction": {
    "actionConfiguration": {
      "body": "-- Insert/Update for the main product\nINSERT INTO product_suppliers (id, supplier_id, product_id)\nVALUES (\n  {{ Table1.updatedRow.id }},\n  {{ Table1.updatedRow.supplier }},\n  {{ Table1.updatedRow.product_id }}\n)\nON DUPLICATE KEY UPDATE\n  supplier_id = {{Table1.updatedRow.supplier}};\n\t\n-- Insert/Update for all child products of that product\nINSERT INTO product_suppliers (supplier_id, product_id)\nSELECT \n    {{ Table1.updatedRow.supplier }} AS supplier_id,\n    ap.product_id\nFROM tempdev_.all_products ap\nWHERE ap.parent_id = {{ Table1.updatedRow.product_id }}\nON DUPLICATE KEY UPDATE\n  supplier_id = VALUES(supplier_id);\n",
      "encodeParamsToggle": true,
      "paginationType": "NONE",
      "pluginSpecifiedTemplates": [
        {
          "value": true
        }
      ],
      "timeoutInMillisecond": 10000
    },
    "confirmBeforeExecute": false,
    "datasource": {
      "id": "SL Website - Live",
      "isAutoGenerated": false,
      "name": "SL Website - Live",
      "pluginId": "mysql-plugin"
    },
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "name": "Add_or_Update_Supplier",
    "pageId": "All Products",
    "runBehaviour": "MANUAL",
    "userSetOnLoad": false
  }
}